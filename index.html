  <!DOCTYPE html>
  <html>
    <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width" />
      <title>跨域 demo</title>
    </head>
    <body>
      <h1 id="amount">{{amount}}</h1>
      <button id="button">发送请求</button>
      <script charset="utf-8">
          button.addEventListener('click', (e) => {
            let dom = document.createElement('script')
            // 随机取名
            let functionName = 'showAmount'+ parseInt(Math.random()*10000000 ,10)
            window[functionName] = function(data) {
              amount.innerText = data.amount
            }
            dom.src = '/pay?callback=' + functionName
            document.body.appendChild(dom)
            dom.onload = function () {
              e.currentTarget.remove()
              delete window[functionName]
            }
            dom.onerror = function () {
              e.currentTarget.remove()
              delete window[functionName]
            }
          })
      </script>
    </body>
  </html>
